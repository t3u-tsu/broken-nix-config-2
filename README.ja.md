# NixOS 構成管理リポジトリ

このリポジトリは、NixOSのマルチホスト構成をFlakesを使用して管理しています。セキュリティ、再現性、およびクロスコンパイル環境を特徴としています。

## ℹ️ ドキュメントの構成について

**重要:** このリポジトリは階層構造になっており、詳細な説明は各ディレクトリの `README.md` に記載されています。

- `hosts/<ホスト名>/`: 特定のマシンのハードウェア仕様とデプロイ手順。
- `services/<サービス名>/`: 特定のサービス（Minecraftネットワーク等）の詳細設定。
- `common/`: 全ホストで共通して適用される設定。

## 使用テクノロジー

- **Nix Flakes:** 再現可能なビルドと依存関係管理。
- **sops-nix:** `age` を使用した機密情報の暗号化管理。
- **nvfetcher:** 外部バイナリ（プラグイン等）のバージョン追跡とハッシュ計算の自動化。
- **WireGuard:** 管理用およびアプリ間通信用のセキュアなネットワーク。
- **クロスコンパイル:** x86_64マシンでのaarch64 (ARM) ビルド。

## セキュリティ構成

- **管理用ネットワーク (wg0):** SSHや管理タスク専用のプライベートネットワーク。
- **アプリ間通信ネットワーク (wg1):** サーバー間のアプリケーション通信用ネットワーク。
- **宣言的秘密情報:** すべての秘密情報は SOPS で管理され、Nixストアに平文で保存されることはありません。

---

## はじめかた

特定のホストやサービスについて詳しく知るには、それぞれのディレクトリにあるドキュメントを参照してください。
```bash
cd services/minecraft
cat README.ja.md
```